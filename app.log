2025-03-05 22:33:54,916 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:33:54,916 - INFO - \U0001f6e0\ufe0f Tentative d'achat de l'upgrade 1 par le joueur 3
2025-03-05 22:33:54,931 - INFO - \U0001f50d Vérification : {'id_level': 1, 'level': 1, 'cost': 100, 'boost_value': 2, 'id_upgrade': 1}
2025-03-05 22:33:54,931 - ERROR - Exception on /upgrades/3/buy [POST]
Traceback (most recent call last):
  File "D:\umarnlg\Project\clikeur\FlaskProject\.venv\Lib\site-packages\flask\app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\umarnlg\Project\clikeur\FlaskProject\.venv\Lib\site-packages\flask\app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\umarnlg\Project\clikeur\FlaskProject\.venv\Lib\site-packages\flask_cors\extension.py", line 176, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
                                                ^^^^^^^^^^^^^^^^^^
  File "D:\umarnlg\Project\clikeur\FlaskProject\.venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\umarnlg\Project\clikeur\FlaskProject\.venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\umarnlg\Project\clikeur\FlaskProject\controllers\upgrade_controller.py", line 41, in buy_upgrade
    success = UpgradeService.buy_upgrade(player_id, upgrade_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\umarnlg\Project\clikeur\FlaskProject\services\upgrade_service.py", line 96, in buy_upgrade
    if level[-1]:  # Vérifie si l'upgrade est achetée
       ~~~~~^^^^
KeyError: -1
2025-03-05 22:33:54,933 - INFO - 127.0.0.1 - - [05/Mar/2025 22:33:54] "[35m[1mPOST /upgrades/3/buy HTTP/1.1[0m" 500 -
2025-03-05 22:35:38,306 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-03-05 22:35:38,306 - INFO - [33mPress CTRL+C to quit[0m
2025-03-05 22:35:41,377 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:35:41,392 - INFO - \U0001f50d Vérification : {'id_level': 1, 'level': 1, 'cost': 100, 'boost_value': 2, 'id_upgrade': 1, 'purchased': 0}
2025-03-05 22:35:41,392 - INFO - \U0001f50d Vérification : {'id_level': 2, 'level': 2, 'cost': 300, 'boost_value': 5, 'id_upgrade': 1, 'purchased': 0}
2025-03-05 22:35:41,392 - INFO - \U0001f50d Vérification : {'id_level': 3, 'level': 3, 'cost': 700, 'boost_value': 10, 'id_upgrade': 1, 'purchased': 0}
2025-03-05 22:35:41,460 - INFO - \u2705 Le joueur 3 a acheté l'upgrade 1 (Niveau 1).
2025-03-05 22:35:41,460 - INFO - 127.0.0.1 - - [05/Mar/2025 22:35:41] "POST /upgrades/3/buy HTTP/1.1" 200 -
2025-03-05 22:35:52,267 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:35:52,282 - INFO - 127.0.0.1 - - [05/Mar/2025 22:35:52] "GET /upgrades/3 HTTP/1.1" 200 -
2025-03-05 22:36:11,525 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:36:11,541 - INFO - 127.0.0.1 - - [05/Mar/2025 22:36:11] "GET /players/3 HTTP/1.1" 200 -
2025-03-05 22:37:14,789 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:37:14,805 - INFO - 127.0.0.1 - - [05/Mar/2025 22:37:14] "GET /player_missions/3 HTTP/1.1" 200 -
2025-03-05 22:38:18,984 - INFO - 127.0.0.1 - - [05/Mar/2025 22:38:18] "[33mPATCH /player_mission/3/increment HTTP/1.1[0m" 404 -
2025-03-05 22:38:29,013 - INFO - 127.0.0.1 - - [05/Mar/2025 22:38:29] "[33mPATCH /player_mission/3/increment HTTP/1.1[0m" 404 -
2025-03-05 22:38:54,062 - INFO - 127.0.0.1 - - [05/Mar/2025 22:38:54] "[33mPATCH /player_mission/3/increment HTTP/1.1[0m" 404 -
2025-03-05 22:38:59,303 - INFO - 127.0.0.1 - - [05/Mar/2025 22:38:59] "[33mPATCH /player_mission/3/increment HTTP/1.1[0m" 404 -
2025-03-05 22:39:29,033 - INFO - 127.0.0.1 - - [05/Mar/2025 22:39:29] "[33mPATCH /player_missions/3/incremen HTTP/1.1[0m" 404 -
2025-03-05 22:39:37,231 - INFO - 127.0.0.1 - - [05/Mar/2025 22:39:37] "[33mPATCH /player_missions/3/incremen HTTP/1.1[0m" 404 -
2025-03-05 22:39:49,665 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:39:49,681 - INFO - 127.0.0.1 - - [05/Mar/2025 22:39:49] "GET /player_missions/3 HTTP/1.1" 200 -
2025-03-05 22:40:22,990 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:40:23,005 - ERROR - \U0001f6ab Mission 2 n'est pas en cours pour le joueur 3. Statut actuel: 2
2025-03-05 22:40:23,005 - INFO - 127.0.0.1 - - [05/Mar/2025 22:40:23] "[31m[1mPATCH /player_missions/3/increment HTTP/1.1[0m" 400 -
2025-03-05 22:40:31,140 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:40:31,156 - ERROR - \U0001f6ab Mission 1 n'est pas en cours pour le joueur 3. Statut actuel: 4
2025-03-05 22:40:31,156 - INFO - 127.0.0.1 - - [05/Mar/2025 22:40:31] "[31m[1mPATCH /player_missions/3/increment HTTP/1.1[0m" 400 -
2025-03-05 22:40:34,917 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:40:34,931 - ERROR - \U0001f6ab Mission 3 n'est pas en cours pour le joueur 3. Statut actuel: 1
2025-03-05 22:40:34,931 - INFO - 127.0.0.1 - - [05/Mar/2025 22:40:34] "[31m[1mPATCH /player_missions/3/increment HTTP/1.1[0m" 400 -
2025-03-05 22:40:48,009 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:40:48,024 - ERROR - \U0001f6ab Mission 3 n'est pas en cours pour le joueur 2. Statut actuel: 4
2025-03-05 22:40:48,024 - INFO - 127.0.0.1 - - [05/Mar/2025 22:40:48] "[31m[1mPATCH /player_missions/2/increment HTTP/1.1[0m" 400 -
2025-03-05 22:40:51,582 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:40:51,596 - ERROR - \u274c Mission 1 introuvable pour le joueur 2.
2025-03-05 22:40:51,597 - INFO - 127.0.0.1 - - [05/Mar/2025 22:40:51] "[31m[1mPATCH /player_missions/2/increment HTTP/1.1[0m" 400 -
2025-03-05 22:40:54,928 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:40:54,943 - ERROR - \u274c Mission 2 introuvable pour le joueur 2.
2025-03-05 22:40:54,944 - INFO - 127.0.0.1 - - [05/Mar/2025 22:40:54] "[31m[1mPATCH /player_missions/2/increment HTTP/1.1[0m" 400 -
2025-03-05 22:40:59,032 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:40:59,047 - ERROR - \U0001f6ab Mission 2 n'est pas en cours pour le joueur 1. Statut actuel: 4
2025-03-05 22:40:59,047 - INFO - 127.0.0.1 - - [05/Mar/2025 22:40:59] "[31m[1mPATCH /player_missions/1/increment HTTP/1.1[0m" 400 -
2025-03-05 22:41:52,295 - INFO - \u2705 Connexion réussie à MySQL !
2025-03-05 22:41:52,312 - ERROR - \U0001f6ab Mission 2 n'est pas en cours pour le joueur 3. Statut actuel: 2
2025-03-05 22:41:52,312 - INFO - 127.0.0.1 - - [05/Mar/2025 22:41:52] "[31m[1mPATCH /player_missions/3/increment HTTP/1.1[0m" 400 -
